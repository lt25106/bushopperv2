var n=document.querySelector("body#index > dialog > span"),[d,a]=document.querySelectorAll("body#index > dialog > button"),r=n.querySelectorAll("datalist"),i=n.querySelectorAll("input"),s=await fetch("https://data.busrouter.sg/v1/stops.min.geojson").then(t=>t.json());function c(){n.style.display="inline",d.style.display="none",a.textContent="Confirm",r.forEach(t=>{s.features.forEach(e=>{let o=document.createElement("option");o.textContent=`${e.properties.name} (${e.id})`,t.appendChild(o)})}),a.onclick=()=>{if(!Array.from(i).map(e=>e.value).every(e=>Array.from(r[0].options).some(o=>o.textContent==e))){alert("Invalid bus stop. Choose from the options given.");return}localStorage.setItem("busstops",JSON.stringify(Array.from(i).map(e=>e.value))),window.location.href="game.html"}}function u(){let t=s.features.length,e=Math.floor(Math.random()*t),o=Math.floor(Math.random()*t);for(;p(s.features[e].properties.services,s.features[o].properties.services);)e=Math.floor(Math.random()*t),o=Math.floor(Math.random()*t);localStorage.setItem("busstops",JSON.stringify([`${s.features[e].properties.name} (${s.features[e].id})`,`${s.features[o].properties.name} (${s.features[o].id})`])),window.location.href="game.html"}function p(t,e){let o=new Set(t);return e.some(l=>o.has(l))}window.showselected=c;window.generatebuses=u;
